export const setTable = (data, people_id) => {
    let result = {}
    let rule_hour = []
    let rule_hour_data = []
    let global_rule = { p: 0, d: 0 }
    data.rules.forEach((i, index) => {
      if (i.type_rule_id === 3 && global_rule.p === 0)
        global_rule = { p: 1, d: i.data }
      if (i.type_rule_id === 4 && rule_hour.indexOf(i.period_rule_id) === -1) {
        rule_hour.push(i.period_rule_id)
        rule_hour_data.push(i.data)
      }
    })
    TIMING.forEach((i, ind) => { result[i[3]] = { data: data.table.filter(j => j.timing_id === ind) } })
    Object.keys(result).forEach((i, ind) => {
        result[i].key = 0
        let timing_zone_temp = -1
        TIMING_ZONE.forEach((j, index) => { if (j.indexOf(ind) !== -1) timing_zone_temp = index })
        let rule_hour_temp = rule_hour.indexOf( timing_zone_temp ) // есть ли текущий час в правилах
        result[i].key = global_rule.p === 1 && result[i].data.length >= global_rule.d ? 2 : result[i].key // проверка на глобал правило
        result[i].key = rule_hour_temp !== -1 && result[i].data.length >= rule_hour_data[rule_hour_temp] ? 2 : result[i].key // проверка на правило по часам
        result[i].key = result[i].data.filter(j => j.people_id === people_id).length > 0 ? 1 : result[i].key
    })
    // 0 - свободной, 1 - мое, 2 - занято
    return result
  }
  
  export const TIMING_ZONE = [
    [0,1,2,3,4,5,6,7,8,9,10,11],
    [12,13,14,15,16,17,18,19,20,21,22,23],
    [24,25,26,27,28,29,30,31,32,33,34,35],
    [36,37,38,39,40,41,42,43,44,45,46,47],
    [48,49,50,51,52,53,54,55,56,57,58,59],
    [60,61,62,63,64,65,66,67,68,69,70,71],
    [72,73,74,75,76,77,78,79,80,81,82,83],
    [84,85,86,87,88,89,90,91,92,93,94,95],
    [96,97,98,99,100,101,102,103,104,105,106,107],
    [108,109,110,111,112,113,114,115,116,117,118,119],
    [120,121,122,123,124,125,126,127,128,129,130,131],
    [132,133,134,135,136,137,138,139,140,141,142,143],
    [144,145,146,147,148,149,150,151,152,153,154,155],
    [156,157,158,159,160,161,162,163,164,165,166,167],
    [168,169,170,171,172,173,174,175,176,177,178,179],
    [180,181,182,183,184,185,186,187,188,189,190,191],
    [192,193,194,195,196,197,198,199,200,201,202,203],
  ]
  
  export const TIMING = [
    [0, 6, 0, "6_00"],
    [1, 6, 5, "6_05"],
    [2, 6, 10, "6_10"],
    [3, 6, 15, "6_15"],
    [4, 6, 20, "6_20"],
    [5, 6, 25, "6_25"],
    [6, 6, 30, "6_30"],
    [7, 6, 35, "6_35"],
    [8, 6, 40, "6_40"],
    [9, 6, 45, "6_45"],
    [10, 6, 50, "6_50"],
    [11, 6, 55, "6_55"],
    [12, 7, 0, "7_00"],
    [13, 7, 5, "7_05"],
    [14, 7, 10, "7_10"],
    [15, 7, 15, "7_15"],
    [16, 7, 20, "7_20"],
    [17, 7, 25, "7_25"],
    [18, 7, 30, "7_30"],
    [19, 7, 35, "7_35"],
    [20, 7, 40, "7_40"],
    [21, 7, 45, "7_45"],
    [22, 7, 50, "7_50"],
    [23, 7, 55, "7_55"],
    [24, 8, 0, "8_00"],
    [25, 8, 5, "8_05"],
    [26, 8, 10, "8_10"],
    [27, 8, 15, "8_15"],
    [28, 8, 20, "8_20"],
    [29, 8, 25, "8_25"],
    [30, 8, 30, "8_30"],
    [31, 8, 35, "8_35"],
    [32, 8, 40, "8_40"],
    [33, 8, 45, "8_45"],
    [34, 8, 50, "8_50"],
    [35, 8, 55, "8_55"],
    [36, 9, 0, "9_00"],
    [37, 9, 5, "9_05"],
    [38, 9, 10, "9_10"],
    [39, 9, 15, "9_15"],
    [40, 9, 20, "9_20"],
    [41, 9, 25, "9_25"],
    [42, 9, 30, "9_30"],
    [43, 9, 35, "9_35"],
    [44, 9, 40, "9_40"],
    [45, 9, 45, "9_45"],
    [46, 9, 50, "9_50"],
    [47, 9, 55, "9_55"],
    [48, 10, 0, "10_00"],
    [49, 10, 5, "10_05"],
    [50, 10, 10, "10_10"],
    [51, 10, 15, "10_15"],
    [52, 10, 20, "10_20"],
    [53, 10, 25, "10_25"],
    [54, 10, 30, "10_30"],
    [55, 10, 35, "10_35"],
    [56, 10, 40, "10_40"],
    [57, 10, 45, "10_45"],
    [58, 10, 50, "10_50"],
    [59, 10, 55, "10_55"],
    [60, 11, 0, "11_00"],
    [61, 11, 5, "11_05"],
    [62, 11, 10, "11_10"],
    [63, 11, 15, "11_15"],
    [64, 11, 20, "11_20"],
    [65, 11, 25, "11_25"],
    [66, 11, 30, "11_30"],
    [67, 11, 35, "11_35"],
    [68, 11, 40, "11_40"],
    [69, 11, 45, "11_45"],
    [70, 11, 50, "11_50"],
    [71, 11, 55, "11_55"],
    [72, 12, 0, "12_00"],
    [73, 12, 5, "12_05"],
    [74, 12, 10, "12_10"],
    [75, 12, 15, "12_15"],
    [76, 12, 20, "12_20"],
    [77, 12, 25, "12_25"],
    [78, 12, 30, "12_30"],
    [79, 12, 35, "12_35"],
    [80, 12, 40, "12_40"],
    [81, 12, 45, "12_45"],
    [82, 12, 50, "12_50"],
    [83, 12, 55, "12_55"],
    [84, 13, 0, "13_00"],
    [85, 13, 5, "13_05"],
    [86, 13, 10, "13_10"],
    [87, 13, 15, "13_15"],
    [88, 13, 20, "13_20"],
    [89, 13, 25, "13_25"],
    [90, 13, 30, "13_30"],
    [91, 13, 35, "13_35"],
    [92, 13, 40, "13_40"],
    [93, 13, 45, "13_45"],
    [94, 13, 50, "13_50"],
    [95, 13, 55, "13_55"],
    [96, 14, 0, "14_00"],
    [97, 14, 5, "14_05"],
    [98, 14, 10, "14_10"],
    [99, 14, 15, "14_15"],
    [100, 14, 20, "14_20"],
    [101, 14, 25, "14_25"],
    [102, 14, 30, "14_30"],
    [103, 14, 35, "14_35"],
    [104, 14, 40, "14_40"],
    [105, 14, 45, "14_45"],
    [106, 14, 50, "14_50"],
    [107, 14, 55, "14_55"],
    [108, 15, 0, "15_00"],
    [109, 15, 5, "15_05"],
    [110, 15, 10, "15_10"],
    [111, 15, 15, "15_15"],
    [112, 15, 20, "15_20"],
    [113, 15, 25, "15_25"],
    [114, 15, 30, "15_30"],
    [115, 15, 35, "15_35"],
    [116, 15, 40, "15_40"],
    [117, 15, 45, "15_45"],
    [118, 15, 50, "15_50"],
    [119, 15, 55, "15_55"],
    [120, 16, 0, "16_00"],
    [121, 16, 5, "16_05"],
    [122, 16, 10, "16_10"],
    [123, 16, 15, "16_15"],
    [124, 16, 20, "16_20"],
    [125, 16, 25, "16_25"],
    [126, 16, 30, "16_30"],
    [127, 16, 35, "16_35"],
    [128, 16, 40, "16_40"],
    [129, 16, 45, "16_45"],
    [130, 16, 50, "16_50"],
    [131, 16, 55, "16_55"],
    [132, 17, 0, "17_00"],
    [133, 17, 5, "17_05"],
    [134, 17, 10, "17_10"],
    [135, 17, 15, "17_15"],
    [136, 17, 20, "17_20"],
    [137, 17, 25, "17_25"],
    [138, 17, 30, "17_30"],
    [139, 17, 35, "17_35"],
    [140, 17, 40, "17_40"],
    [141, 17, 45, "17_45"],
    [142, 17, 50, "17_50"],
    [143, 17, 55, "17_55"],
    [144, 18, 0, "18_00"],
    [145, 18, 5, "18_05"],
    [146, 18, 10, "18_10"],
    [147, 18, 15, "18_15"],
    [148, 18, 20, "18_20"],
    [149, 18, 25, "18_25"],
    [150, 18, 30, "18_30"],
    [151, 18, 35, "18_35"],
    [152, 18, 40, "18_40"],
    [153, 18, 45, "18_45"],
    [154, 18, 50, "18_50"],
    [155, 18, 55, "18_55"],
    [156, 19, 0, "19_00"],
    [157, 19, 5, "19_05"],
    [158, 19, 10, "19_10"],
    [159, 19, 15, "19_15"],
    [160, 19, 20, "19_20"],
    [161, 19, 25, "19_25"],
    [162, 19, 30, "19_30"],
    [163, 19, 35, "19_35"],
    [164, 19, 40, "19_40"],
    [165, 19, 45, "19_45"],
    [166, 19, 50, "19_50"],
    [167, 19, 55, "19_55"],
    [168, 20, 0, "20_00"],
    [169, 20, 5, "20_05"],
    [170, 20, 10, "20_10"],
    [171, 20, 15, "20_15"],
    [172, 20, 20, "20_20"],
    [173, 20, 25, "20_25"],
    [174, 20, 30, "20_30"],
    [175, 20, 35, "20_35"],
    [176, 20, 40, "20_40"],
    [177, 20, 45, "20_45"],
    [178, 20, 50, "20_50"],
    [179, 20, 55, "20_55"],
    [180, 21, 0, "21_00"],
    [181, 21, 5, "21_05"],
    [182, 21, 10, "21_10"],
    [183, 21, 15, "21_15"],
    [184, 21, 20, "21_20"],
    [185, 21, 25, "21_25"],
    [186, 21, 30, "21_30"],
    [187, 21, 35, "21_35"],
    [188, 21, 40, "21_40"],
    [189, 21, 45, "21_45"],
    [190, 21, 50, "21_50"],
    [191, 21, 55, "21_55"],
    [192, 22, 0, "22_00"],
    [193, 22, 5, "22_05"],
    [194, 22, 10, "22_10"],
    [195, 22, 15, "22_15"],
    [196, 22, 20, "22_20"],
    [197, 22, 25, "22_25"],
    [198, 22, 30, "22_30"],
    [199, 22, 35, "22_35"],
    [200, 22, 40, "22_40"],
    [201, 22, 45, "22_45"],
    [202, 22, 50, "22_50"],
    [203, 22, 55, "22_55"],
    [204, 23, 0, "XXX"],
    [205, 23, 5, "XXX"]
  ]
  